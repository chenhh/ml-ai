# 排列\(permutation\)

## 不允許重覆取組合公式

> $$ n$$件相異物，不允許重覆取$$r$$件組合的方法數有$$C(n,r) \equiv \binom{n}{r} =\frac{n!}{r!(n-r)!}, \ 0\leq r \leq n$$

* $$n$$件相異物，不允許重覆取$$r$$件排列的方法數有$$\frac{n!}{(n−r)!}$$。
* 而組合相對於排列則**不考慮次序**，因此有$$\frac{n!}{(n−r)!r!}$$ 種 \(QED\)

例：1,2,3三個數字中取2個相異數字，取到1,2或2,1兩類視為相同的組合，因此有C\(3,2\)=3種組合。

例：$$1,2,\ldots ,300$$中取3個數使其和為3的倍數之選法?

* 將$$1,2,\ldots,300$$分為除以3餘數為$$0,1,2$$三個集合。
* $$A_1=\{3k \vert 1 \leq k \leq100\}$$為除以3餘數為0的集合。
* $$A_2= \{3k+1 \vert 1 \leq k \leq 99\}$$為除以3餘數為1的集合。
* $$A_3=\{3k+2 \vert 1 \leq k \leq 99 \}$$為除以3餘數為2的集合。
* 可得 $$|A_1 |=|A_2 |=|A_3 |=100$$。
* 取3個數和為3的倍數有以下情形
* 3個數均從$$A_1$$ 選出，有$$C(100, 3)$$種組合。
* 3個數均從$$A_2$$ 選出，有$$C(100,3)$$種組合。
* 3個數均從$$A_3$$ 選出，有$$C(100,3)$$種組合。
* 3個數分別由$$A_1,A_2,A_3$$ 選出，有$$C(100,1)^3$$ 組合。
* 因此總共有$$3 \times C(100,3) + C(100,1)^3 $$ 種組合。

## 允許重複取組合公式

> * $$n$$件相異物允許重複取$$r$$件組合的方法有$$\binom{ n+r-1}{ r} $$種。
> * 可重複取代表每一件物品有無限多個，總共要取$$r$$個。
> * 等同於有$$r$$個相同球，分成$$n$$相異箱，且可有空箱。
> * 等同於 $$x_1 + x_2 + \ldots   + x_n =r, \ x_i  \in \mathbb{Z}^+$$的解個數。
> * 等同於$$r$$個0，$$(n-1)$$個1形成的二元序列個數。

可想成$$r$$個相同物品排成一列，因為均為相同物品，所以只有一種排法。然後有$$(n-1)$$個相同棒子\(棒子為相同是因此是以區間代表不同物品，而不是以棒子區分\)放入其中，因此棒子與物品總共有$$n+r-1$$個，而將$$n+r-1$$個物品分成相異$$n$$類，有$$\frac{(n−1+r)!}{r!(n−1)!}=\binom{ n+r-1}{ r} $$。



### 不可有空箱的公式

> * 等於有$$r$$個相同球，分成$$n$$相異箱，不可有空箱的解個數。
> * 等同於 $$x_1 + x_2 + \ldots   + x_n =r, \ x_i  \in \mathbb{N}$$的解個數。

$$r$$個相同球，分成$$n$$相異箱，不可有空箱。因此每個箱子至少有一球，等價於$$r-n$$個相同球，分成$$n$$個相異箱，可以有空箱的解個數。因此有$$\binom {n + (r-n) +1}{ r-n} = \binom{ r-1}{ r-n}  = \binom{ r-1}{ n-1} $$。



考慮$$x_1+x_2+x_3=10, 0 \leq x_1 \leq 10,\ 2 \leq  x_2 \leq 10,\ 5 \leq x_3 \leq 10$$。

* 即10個相同球，分為3相異箱，第1箱可為空，第2箱至少有2球，第3箱至少有5球。
* 因此為10-2-5=3個相同球，分為3相異箱，有$$\binom{3+ 3 -1} {3} = \binom{ 5}{ 3} $$種。

## 組合公式的遞迴關係式

> $$\binom {n}{r} = \binom {n-1}{r-1} + \binom{ n-1 }{ r} ,  \ 0 \leq r \leq n$$

### 

#### 排列組合的意義

* $$\binom{ n}{r}$$表示從$$n$$件相異物不允許重複取$$r$$件的組合方法數。
* 考慮其中某一物件$$x$$，組合方法中，可分為取中該物件與沒有取中該物件兩種情形。

  * 取中該物件時，相當於從剩餘的$$(n-1)$$件相異物取$$(r-1)$$件，有$$\binom{n -1}{r-1}$$種組合。
  * 沒有取中該物件時，表示取中其它物件，相當於從剩餘的$$(n-1)$$件相異物取$$r$$件，有$$\binom{ n -1}{r}$$種組合。

#### 代數證明

$$\binom{n -1}{r-1}+ \binom{ n -1}{r} = \frac{(n-1)!}{(r-1)!(n-r)!}+\frac{(n-1)!}{r!(n-r-1)!} = \frac{r(n-1)!}{r!(n-r)!} + \frac{((n-r)(n-1)!}{r!(n-r)!} = \frac{n!}{r!(n-r)!} = \binom{ n }{ r}$$

## 二項式定理\(binomial theorem\)

> $$x,y$$為變數，$$n \in \mathbb{N}$$，則 $$(x+y)^n = \sum_{k=0}^n \binom{ n}{ k}x^k y^{n-k}$$
>
> * $$x=1, y=1$$代入後可得 $$2^n= \binom{n} {0}+ \binom{n} {1}+ \ldots + \binom{n} {n}$$
> * $$x=1, y=-1$$代入後可得 $$0 = \binom{n} {0} - \binom{n} {1}+ \binom{n} {2} + \ldots + (-1)^n \binom{n} {n}$$

* $$(x+y)^n = (x+y)(x+y) \ldots (x+y)$$
* 而$$x^k y^{n-k}$$的係數為上式$$n$$個乘項中選$$k$$個$$x$$，$$n-k$$個$$y$$，因此為 $$\frac{n!}{k!(n-k)!} = \binom{n} {k} ,\ k=0,1,2\ldots, n$$\(QED\)。

## 多項方程式

$$(x_1 +x_2+ \ldots +x_k)^n = \sum_{0 \leq n_i \leq n, n_1+n_2+\ldots + n_k=n} \binom{ n}{ n_1, n_2,\ldots, n_k }x_1^{n_1} x_2^{n_2}\ldots x_k^{n_k}$$

$$\binom{ n}{ n_1, n_2,\ldots, n_k }$$

* $$x_1^{n_1} x_2^{n_2}\ldots x_k^{n_k}$$的係數，等同於$$n$$個不全相異物，共有$$k$$類的排列方法。
* 因為$$n$$項乘積中先選$$n_1$$ 個$$x_1$$，再由剩下的$$n−n_1$$ 個乘積中選$$n_2$$ 個$$x_2$$，以此類推到$$n−n_1−\ldots−n_{k−1}$$個乘積中選$$n_k$$ 個$$x_k$$。
* 有 $$\binom{ n }{n_1 } \binom{ n  - n_1}{ n_2 } \binom{ n -n_1 - n_2 }{ n_3 } \ldots \binom{ n - n_1 \ldots - n_{k-1} }{ n_k } = \frac{n!}{n_1! n_2! \ldots n_k!}$$ \(QED\)

## Vandermonde's convolution

> $$\sum_{k=0}^n \binom{ r}{ k}  \binom{ s}{ n-k}  = \binom{ r+s}{ n}$$

* $$\binom{ r+s}{ n }$$為$$r+s$$相異物品中，取$$n$$個的組合個數。
* 而$$r+s$$個相異物品，可分為兩堆：一堆有$$r$$個，另一堆有$$s$$個相異物品。
* 因此選$$n$$件的方法，可從第一堆取$$k$$個，有$$\binom{ r}{ k}$$種方法；第二堆取$$n-k$$個，有$$\binom{ s}{n-  k}$$種方法，$$k=0,1,2,\ldots, n$$。
* 因此總選取方法有$$\sum_{k=0}^n \binom{ r}{ k} \binom{ s}{ n-k }$$ \(QED\)。

## 史特靈近似\(Stirling approximation\)

> * $$n! \approx \sqrt{2 \pi n} (\frac{n}{e} )^n$$
> *  $$ \lim_{n \rightarrow \infty} \frac{n!}{\sqrt{2 \pi n} (\frac{n}{e} )^n} = 1$$

史特靈公式是一條用來取$$n$$階乘近似值的數學公式。即使在$$n$$很小的時候，史特靈公式的取值已經十分準確。

詳細證明見[Wikipedia](https://zh.wikipedia.org/wiki/%E5%8F%B2%E7%89%B9%E9%9D%88%E5%85%AC%E5%BC%8F)。



