# 遍歷性簡介

## 簡介

Ergodicity用於描述一個隨機系統在時間和空間維度上的統計性質。它關注於系統長期行為的統計特徵是否具有一致性和可預測性。更詳細的說，它描述了隨機過程的統計性質是否可以通過觀察該過程的單個樣本軌跡在時間上的平均行為來確定。它建立了時間平均和整體平均（或稱系綜平均）之間的聯繫。

<mark style="color:red;">時間遍歷性: 時間平均值與空間平均值相類似</mark>。簡單點說，在經過長時間後，時間平均將會趨近空間平均。即機率在時間上的分佈和機率在空間上的分佈，是可以相互替代的。

時間平均 (Time Average)：對於一個離散時間的隨機過程 $$\{X_t\}$$，其時間平均可以定義為：$$\displaystyle \overline{X}_{time}=\lim_{T \to \infty} \frac{1}{T} \sum_{t=1}^T X_t$$。

整體平均 (Ensemble Average): 在一個固定的時間點 t，我們可以考慮所有可能的隨機過程實現，並計算該時間點上隨機變數$$X_t$$的期望值。這就是整體平均，通常用期望值$$\mathrm{E}(X_t)$$ 表示。

<mark style="background-color:red;">Ergodicity 的核心思想：時間平均等於整體平均。</mark>

如果一個隨機過程是均值遍歷(Mean Ergodicity)的，那麼對於這個過程的任何實現，其時間平均的均值將等於該過程在任何時間點的整體均值：，即$$\mathrm{E}(\overline{X}_{time}) = \mathrm{E}(X_t)$$。

強遍歷性性 (Strong Ergodicity)：意味著時間平均本身就收斂到整體平均：$$\overline{X}_{time} = \mathrm{E}(X_t)$$(以機率1或均方收斂)。

一個隨機過程要滿足遍歷性，通常需要滿足一些條件，例如：

* **平穩性 (Stationarity):** 過程的統計特性不隨時間改變。平穩性是遍歷性的必要條件，但不充分。例如，一個平穩過程可能有多個不變測度（invariant measures），而遍歷性要求只有唯一的、不變的測度，且系統會「遍歷」所有可能狀態。
* **混合性 (Mixing):** 過程在時間上充分混合，使得遙遠過去的狀態對現在的狀態的影響逐漸減弱。系統會充分"攪拌"，使得長期行為不依賴於初始條件。

<mark style="color:red;">**如果有一個隨機過程，其過往的歷史機率不能適用於其未來的情景，那麼這個隨機過程就不具有遍歷性**</mark>。這一性質是隨著條件的變化，過往的成功經驗並不必然適用於未來和當下。

無論是對於時間的觀測樣本，還是對於空間的觀測樣本，都可以用相同的統計學的數學描述。只是一個對於時間，一個對於位置。在數學上，講到遍歷性的時候，通常自動聯想到，經過非常長的時間過後之平均數。而這其實也表示一個系統在經過非常長一段時間之後，會趨近到「穩定」的狀態，也就是趨近到最大亂度的狀態。

若單一個物理系統在不同時間內重複相同的實驗（例如丟一個銅板），其取樣數據所得的統計結果（如銅板出現正面的機率）與極多個完全相同的物理系統的系綜（如丟極多個相同的銅板）在同時作相同的實驗取樣數據的統計結果假設為相同時，此種假設即稱為遍歷性假設。

統計物理所給出的遍歷性的定義就是橫截面的空間預期值（空間均值）= 沿著時間軸上樣本所經歷所有可能的樣本空間的平均值（時間均值）。

### 範例

<mark style="background-color:red;">在金融市場中，根據歷史資料估計未來收益時經常使用遍歷性假設</mark>。

舉例來說: 假設你想買雙鞋，你有兩個辦法:&#x20;

* \[時間]一個是你每天到鞋站去找鞋子，最終你會找到最棒的一雙鞋。
* \[空間]另一個則是你開車到鎮上花一整天四處找鞋，找有賣有最棒一雙鞋的地方。

若這兩個辦法得出的結果一致，則該系統具遍歷性。

例如要得出一個城市A、B兩座公園哪一個更受歡迎，有兩種辦法。

* \[空間]第一種辦法是在一定的時間段考察兩個公園（在空間上考察）的人數，人數多的為更受歡迎公園；
* \[時間]第二種辦法，隨機選擇一名市民，跟蹤足夠長的時間（在時間上考察）來統計他去兩個公園的次數，去得多的為更受歡迎公園。如果這個兩個結果始終一致，則表現為遍歷性。

Bernouli實驗中，一個質地均勻的硬幣，它每一面的出現機率都是50％，假設得到正面就是+1，得到背面就是-1，那麼，顯而易見地，平均值就是 1\*0.5 + （-1）\*0.5 = 0；這是空間維度下計算的預期值。另一方面，如果不停地拋擲硬幣，並把每次拋擲的結果都記錄下來，隨著拋擲次數的增加，計算平均值，假若時間足夠長（這是一個非同一般的假設），那麼得到的結果大機率同樣是正面反面平分秋色，這樣算出來的沿著時間維度的平均值和空間維度計算的平均值是一樣的。所以，可以看到，伯努利過程是具有遍歷性的。

<mark style="color:red;">Bernouli的實驗能夠成功滿足遍歷性是因為它沒有「時間陷阱」</mark>，即隨著時間的流逝，出現某種極端的“黑天鵝”場景，整個的遊戲過程陷入這類特殊的場景就戛然而止，無以為繼了。

因為在工程應用中，我們通常無法到所有的樣本函數來構成樣本空間，所以希望通過有限次的觀測，或者一次觀測，就能夠描述這個過程的一些性質<mark style="color:red;">。對遍歷性隨機過程，只需觀察一條樣本函式且觀測時間足夠長，就可以得到隨機過程的所有取值狀態及每個狀態的機率分佈</mark>。

**獨立同分佈（i.i.d.）過程**：如連續擲公平骰子，$$\{X_t\}$$ 是獨立的，每次結果服從均勻分佈。這種過程是遍歷的，因為時間平均（樣本均值）會收斂到總體均值。

**馬可夫鏈**：一個不可約且非週期的馬可夫鏈（具有唯一平穩分佈）是遍歷的，其時間平均會收斂到平穩分佈的期望值。

舉例來說：我們認為每次的樣本函數，是關於時間的單值。當該過程是遍歷的：則時間平均等於統計平均；時間自相關（Time autocorrelation)等於統計自相關(statistical autocorrelation)；也就是說，我們不需要知道這個隨機過程的所有樣本函數，就能得到相同結果。

大部分金融集合機率對個體的時間機率沒有意義。通俗的話講，只要一種策略有爆倉的機率，不管這個機率在集合機率下有多低，但是在個人的時間機率下，只要時間夠久，就一定會爆倉。，也就是說，如果你的策略不具備遍歷性，剩下什麼機率，賠率，正期望，複利，都等於零。

<mark style="color:red;">小機率事件大量重複必然發生</mark>：記小機率事件的機率為$$p$$，重複$$n$$次，那麼這個事件一次也沒發生的機率是 $$(1-p)^n$$。發生至少一次的機率是 $$P=1-(1-p)^n$$ 。 可以看出，當$$n$$趨向於正無窮時，$$P$$趨向於1。也就是說，如果小機率事件重複無窮多次，那麼必然發生至少一次。

## 遍歷性

<figure><img src="../.gitbook/assets/image (62).png" alt=""><figcaption><p>測度定義</p></figcaption></figure>

第一種定義：空間平均要等於時間平均。

第二種定義：保測度轉換(Measure-preserving transformation)若有遍歷性，則在轉換下不變的集合，其測度必為0或1。

第一種跟第二種定義之間的連結可參考Birkhoff’s Theorem。

第三種定義：馬可夫鍊(Markov chain)， 如果這個系統完全沒有吸入壁(Absorbing state)，也就是說沒有一個狀態是你一旦進入以後就再也無法離開，則這個系統就具有遍歷性。直接去看馬可夫鍊轉移矩陣的特徵值，則只要看看特徵值有沒有包含1，就知道系統有沒有遍歷性了。

## 混合性（Mixing）的意義

Mixing是確保隨機系統具有Ergodicity的關鍵特性。它本質上描述了系統狀態如何逐漸"忘記"其初始條件，並均勻地探索整個可能的狀態空間。

形式上，對於一個平穩過程$$\{X_t\}$$，若其滿足強混合性（strong mixing），則對於任意兩個可測事件\
$$𝐴,B$$（分別由過程的過去和未來生成），有：$$\displaystyle \lim_{t \to \infty} |\mathrm{P}(A \cap T^{-t}B) - \mathrm{P}(A)\mathrm{P}(B) |=0$$。

其中$$T$$為是時間平移算子。這表示隨著時間$$𝑡$$增加，事件$$A$$（過去）和$$T^{−t}B$$(未來）變得統計獨立。

混合性描述的是一個隨機過程隨著時間的推移，不同時間點的狀態之間的依賴性逐漸減弱，最終趨於獨立的性質。直觀地說，一個具有良好混合性的過程會「攪拌」其狀態空間，使得長時間的演化會探索到所有可能的狀態，並且過去的狀態對很久以後的狀態的影響變得可以忽略不計。

* 探索整個狀態空間。
* 打破長期依賴性。

具體來說，混合性保證了自相關函數$$\mathrm{Cov}(X_0, X_t)  \to 0 \text{ as } t \to \infty$$，，這是時間平均收斂的關鍵。

* **混合性** $$\Rightarrow$$ **遍歷性**：強混合性（或甚至弱混合性）通常足以保證遍歷性，因為它確保了系統的長期獨立性和狀態的充分探索。
* **遍歷性** $$\not\Rightarrow$$ **混合性**：遍歷性是一個較弱的條件，不一定要求混合性。例如，一個遍歷的馬可夫鏈可能不滿足強混合性，但只要它是不可約且非週期的，就能保證遍歷性。

**層次**：$$\psi$$-混合 ⇒$$\phi$$-混合 ⇒$$\beta$$-混合 ⇒$$\alpha$$-混合 ⇒ 弱混合 ⇒ 遍歷性。

* **遍歷性是最弱的條件**：它只要求時間平均等於空間平均，不一定需要強烈的獨立性。
* **混合性是充分條件**：所有上述混合性形式都保證遍歷性，但反過來不成立。例如，一個遍歷過程可能不滿足任何混合性條件（如某些具有長記憶的過程）。
* **i.i.d. 過程**：滿足所有混合性（$$\alpha, \beta, \phi$$等等），當然也是遍歷的。
* **週期性馬爾可夫鏈**：可能平穩但不遍歷，也不混合，因為狀態之間的依賴永遠存在。
* **高斯過程**：如果自相關函數衰減到 0，可能是$$\alpha$$-混合或弱混合的，從而遍歷。

**非混合過程的例子**

* **常數隨機變數：** 考慮一個始終輸出相同常數值的隨機過程。這個過程是平穩的，但不是混合的。它的時間平均永遠是那個常數，而整體平均也是那個常數，但這個例子比較平凡。
* **週期性過程：** 考慮一個具有確定週期的隨機過程（例如，一個正弦波加上一些隨機噪聲，但週期固定）。這個過程可能不是完全混合的，因為它的未來狀態在一定程度上受到過去狀態的強烈影響（週期性）。
* **具有記憶的過程：** 某些具有長期記憶的隨機過程，例如某些長程相關的金融時間序列，可能不滿足強混合性條件。

## 參考資料

[https://www.zhihu.com/question/26070689](https://www.zhihu.com/question/26070689)
