# 時間序列分解

## 簡介

時間序列數據可以表現出多種模式，將時間序列拆分為多個組件通常很有幫助，每個組件代表一個基礎模式類別。

一般常見三種類型的時間序列模式：<mark style="color:red;">**趨勢、季節性和週期**</mark>。因此當我們將時間序列分解為組件時，我們通常將<mark style="color:red;">趨勢和週期組合成單個趨勢週期組件</mark>（為簡單起見，有時稱為趨勢）。<mark style="background-color:red;">因此，我們認為時間序列包含三個部分：</mark><mark style="background-color:red;"><mark style="color:red;">趨勢週期部分、季節性部分和剩餘部分<mark style="color:red;"></mark><mark style="background-color:red;">（包含時間序列中的任何其他內容）</mark>。

#### 加性分解(additive decomposition)

$$y_t=S_t+T_t+R_t$$

* $$y_t$$為資料，$$S_t$$為季節性部份，$$T_t$$為趨勢週期部份，$$R_t$$為剩餘部份。
* 如果季節性波動的幅度或圍繞趨勢週期的變化不隨時間序列的水平而變化，則加性分解是最合適的。

#### 乘法分解(multiplicative decomposition)

* $$y_t=S_t \times T_t \times R_t$$
* $$\log y_t=\log S_t + \log T_t + \log R_t$$

當季節性模式的變化或趨勢週期的變化似乎與時間序列的水平成正比時，乘法分解更合適。乘法分解在經濟時間序列中很常見。

使用乘法分解的另一種方法是首先轉換數據，直到序列中的變化隨著時間的推移看起來是穩定的，然後使用加法分解。當使用對數變換時，這相當於使用乘法分解。

## 經季節性調整的數據

如果從原始數據中去除季節性成分，則結果值為“季節性調整”數據。

* 對於加性分解，經季節性調整的數據為$$y_t-S_t$$。
* 對於乘法數據，經季節性調整的值是使用獲得的是$$y_t / S_t$$。

<mark style="color:blue;">如果季節性引起的變化不是主要關注點，則季節性調整的系列可能很有用</mark>。

* 例如，每月失業數據通常會進行季節性調整，以突出由於潛在經濟狀況而不是季節性變化引起的變化。
* 離校生找工作導致的失業增加是季節性變化，而經濟衰退導致的失業增加是非季節性的。
* 大多數研究失業數據的經濟分析師對非季節性變化更感興趣。因此，就業數據（和許多其他經濟數據）通常會進行季節性調整。

季節性調整的系列包含剩餘部分以及趨勢週期。因此，它們並不“平穩”，“低迷”或“好轉”可能會產生誤導。<mark style="color:red;">如果目的是尋找系列中的轉折點，並解釋方向的任何變化，那麼最好使用趨勢週期成分而不是季節性調整的數據</mark>。

### 時間序列分解可用於衡量時間序列中趨勢和季節性的強度

* &#x20;對於有強烈趨勢的數據，經季節性調整的數據$$y_t - S_t$$應該比剩餘部分$$R_t$$有更多的變化。即$$\mathrm{Var}(R_t)/\mathrm{Var}(R_t +T_t)$$之值應該很小。
* 但對於微小或沒有趨勢的資料，$$\mathrm{Var}(R_t)/\mathrm{Var}(R_t +T_t)$$的值應趨近於1。

因此可定義<mark style="color:red;">**趨勢的強度(strength of trend)**</mark>為

* $$F_{Tend} = \max\left( 0,  1- \frac{\mathrm{Var}(R_t)}{\mathrm{Var}(R_t +T_t)} \right)$$
* 這將給出 0 到 1 之間趨勢強度的度量。因為剩餘部份的變異數有時甚至可能大於季節性調整數據的變異數，所以我們將可能的最小值設為0。

季節性強度的定義類似，但相對於去趨勢數據而不是季節性調整後的數據：

* $$F_S = \max\left( 0,  1- \frac{\mathrm{Var}(R_t)}{\mathrm{Var}(R_t +S_t)} \right)$$
* 沒有季節性趨勢的資料的$$F_S \rightarrow 0$$，反之有強烈季節性趨勢的資料$$F_S \rightarrow 1$$。

## 移動平均線(moving average)

## 經典分解(classical decomposition)

## X11分解

## SEATS分解

## STL分解
